# 帖子功能使用说明

## 功能概述

已实现完整的帖子功能，包括：
1. 模拟用户和帖子数据
2. 首页帖子列表展示
3. "我的发帖"页面
4. 点赞、收藏、评论功能

## 数据库设置

1. 执行数据库 schema 更新：
```bash
mysql -u root -p < backend/schema.sql
```

## 初始化模拟数据

运行以下命令来创建模拟用户和帖子数据：

```bash
cd backend
python init_data.py
```

这将创建：
- 5个模拟用户（手机号：13800000001-13800000005，密码：123456）
- 从 dataset/data/images 中读取图片创建帖子
- 每个用户会有多个帖子
- 自动生成点赞、收藏、评论数据

## 后端启动

```bash
cd backend
python app.py
```

后端会运行在 `http://0.0.0.0:5000`

## Android 应用配置

1. 更新 `app/src/main/java/com/example/dresscode1/network/ApiClient.java` 中的 `BASE_URL`，改为你的服务器 IP 地址

2. 同步 Gradle 项目以获取新的依赖（Glide）

## 功能说明

### 首页
- 显示所有用户的帖子列表
- 每个帖子显示：用户信息、内容、图片、点赞数、评论数、收藏数
- 支持点赞、收藏、评论操作

### 我的发帖
- 切换到"我的"标签页
- 显示当前登录用户发布的所有帖子
- 同样支持点赞、收藏、评论操作

### 点赞功能
- 点击点赞按钮可以点赞/取消点赞
- 点赞数实时更新
- 已点赞的帖子会显示红色心形图标

### 收藏功能
- 点击收藏按钮可以收藏/取消收藏
- 收藏数实时更新
- 已收藏的帖子会显示黄色星星图标

### 评论功能
- 点击评论按钮打开评论对话框
- 可以查看所有评论
- 可以发表新评论
- 评论数实时更新

## API 接口

### 获取帖子列表
```
GET /api/posts?page=1&page_size=20&current_user_id=1
```

### 获取我的帖子
```
GET /api/posts/my?user_id=1&page=1&page_size=20
```

### 点赞/取消点赞
```
POST /api/posts/{postId}/like
Body: {"user_id": 1}
```

### 收藏/取消收藏
```
POST /api/posts/{postId}/collect
Body: {"user_id": 1}
```

### 获取评论列表
```
GET /api/posts/{postId}/comments?page=1&page_size=50
```

### 添加评论
```
POST /api/posts/{postId}/comments
Body: {"user_id": 1, "content": "评论内容"}
```

## 注意事项

1. 图片加载：确保后端可以访问 `dataset/data/images` 目录
2. 网络配置：Android 应用需要与后端在同一网络或配置正确的 IP 地址
3. 用户登录：使用模拟用户账号登录后才能进行点赞、收藏、评论操作

## 测试账号

可以使用以下账号登录测试：
- 手机号：13800000001，密码：123456，昵称：时尚达人小美
- 手机号：13800000002，密码：123456，昵称：穿搭博主阿强
- 手机号：13800000003，密码：123456，昵称：潮流先锋Lisa
- 手机号：13800000004，密码：123456，昵称：简约风格Mike
- 手机号：13800000005，密码：123456，昵称：复古爱好者Amy

